<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KAHOME! - gio.kami.su</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./../assets/fonts/icons/bi-1-11-1/bootstrap-icons.css">
</head>
<style>
    *{
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 180ms;
        /* from tailwindcss. */
    }
    .kick-transition{
        transition: none !important;
    }
    .xmide{
        width: 100%;
    }
    .xmide-x{
        width: 80%;
    }
    #srchIn>*{
        margin: auto;
    }
</style>
<body class="bg-stone-600 text-stone-50 gap-3 min-w-full min-h-screen flex justify-center justify-items-center items-center">
    <a href="/" class="hidden" target="_blank" id="GO"></a>
    <div class="0 p-3 mx-auto my-auto rounded " id="main">
        <script>
            var GO = document.getElementById('GO');
            const SearchEngine = {
                Bing: 'https://bing.com/search?q=#Bing',
            };
            var UsingEngine = SearchEngine.Bing;
            var ThisHistory = [];
        </script>
        <h1 class="text-center font-sans text-5xl font-bold space-x-1 w-fit mx-auto" style="word-spacing: 1px !important;">KAHOME!</h1>
        <div id="item3" class="mx-auto my-16 xmide-x opacity-80 flex
         transition-all clear-both bg-zinc-200 active:bg-opacity-50 text-white border border-zinc-300 border-opacity-40 bg-opacity-40 px-5 py-2 rounded-lg shadow-sm hover:shadow-md cursor-text">
            <span class="w-full block">
                <input id="srchIn" style="width: 66vw;" placeholder="Search on ..." class="bg-transparent mr-3 border-0 border-transparent text-xl bg-opacity-40 rounded outline-none outline-transparent p-0 m-0 text-white  transition-all " />
            </span>
            <span id="srch-btn" class="block transition-all -translate-x-1 border border-transparent bg-opacity-40 rounded-lg cursor-pointer" onclick="SearchAction(srch_bar.value);">
                <i class="bi bi-search">S</i>
            </span>
        </div>

        <script>
            var srch_btn = document.getElementById('srch-btn'),
            srch_box = document.getElementById('item3'),
            srch_bar = document.getElementById('srchIn'),
            isLastOperationTyping = false;
            srch_bar.setAttribute('placeholder', srch_bar.getAttribute('placeholder').replace('...', UsingEngine.split('#')[1]).concat('! '));
            var isSearching = false;
            srch_bar.addEventListener('focus', () => {
                isSearching = true;
                SEC('item3', 'shadow-md shadow-stone-100 hover:shadow-stone-200 text-white xmide', 'shadow-sm xmide-x');

            });
            srch_bar.addEventListener('blur', () => {
                isSearching = false;
                SEC('item3', 'shadow-sm xmide-x', 'shadow-md shadow-stone-100 hover:shadow-stone-200 text-white xmide');

            });

            srch_box.addEventListener('click', (e) => {
                if(e.target.id.toString().includes('srch-btn') || e.target.classList.toString().includes('search')) return;
                srch_bar.focus();
            }, 33);

            
            const SEC = (targetIdName, targetStatusClass, targetReplaceStatusClass) => {
                let operate = document.getElementById(targetIdName.toString()),
                toDeleteArray = targetReplaceStatusClass.toString().split(' '),
                toReplaceArray = targetStatusClass.toString().split(' ');
                for(let sub of toDeleteArray){
                    operate.classList.remove(sub);
                }
                for(let sub of toReplaceArray){
                    operate.classList.add(sub);
                }
                delete operate;
            }
            window.addEventListener('keydown', (e) => 
            {
                switch(e.key.toString())
                {
                    case "Enter":
                        if(!isSearching) break;
                        if(isLastOperationTyping) break;
                        setTimeout(() => {
                            SearchAction(srch_bar.value);
                        }, 100);
                        break;
                }
                isLastOperationTyping = e.isComposing;
            });


            const SearchAction = (word) => 
            {
                if
                (word == '' 
                || word == null) return;
                GO.setAttribute
                ('href', 
                UsingEngine
                .split('#')[0]
                .concat(word));
                GO.click();
                ThisHistory.push(word);
                setTimeout(() => {
                    srch_bar.value = '';
                }, 300);
            }


        </script>

</div>
</body>
</html>
